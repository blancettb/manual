{
  "name": "Under-replicated partitions",
  "description": "Checks whether the number of under-replicated partitions exceeds the expected number.",
  "type": "MANUAL",
  "tags": [
    "container",
    "docker",
    "podman",
    "cpu",
    "diagnostic",
    "watsonx"
  ],
  "fields": [
    {
        "name": "content",
        "description": "Content for manual action",
        "encoding": "base64",
        "value": "
1. Increase the replication factor for the topic:
   You can increase the replication factor for the topic by adding the `--topic` and `--replication-factor` flags when running the Kafka command. For example:
   ```
   kafka-topics.sh --create --topic <topic_name> --bootstrap-server <broker_ip>:<port> --replication-factor <number_of_replicas>
   ```
   This will create a new topic with the specified replication factor.

2. Add more brokers to the cluster:
   If increasing the replication factor is not an option, you can add more brokers to the cluster to handle the increased load. This will allow you to spread the data across more nodes, reducing the risk of under-replication. To add new brokers, use the `--add-brokers` flag when starting the Kafka server:
   ```
   bin/kafka-server-start.sh --daemon --config /path/to/kafka.properties --broker-id <broker_id> --topic <topic_name> --bootstrap-server <broker_ip>:<port> --replication-factor <number_of_replicas>
   ```

3. Adjust the message retention period:
   If there are many under-replicated partitions due to messages being deleted too quickly, you may need to adjust the message retention period. You can change the retention period using the `--message-retention-hours` flag when running the Kafka command. For example:
   ```
   kafka-topics.sh --alter --topic <topic_name> --partitions <number_of_partitions> --message-retention-hours <new_retention_period>
   ```

4. Implement a custom partitioner:
   ",
        "secured": false
    }
],
  "staticId": "containerCPUDebug",
  "metadata": {
    "ai": [
      {
        "algorithm": "watsonx",
        "events": ["dF8pLB_tExAOJs8d7L906JEgttk"]
      }
    ]
  }
}